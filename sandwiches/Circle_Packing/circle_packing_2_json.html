<DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
  <title>Circle Packing</title>
  <script src="../../libraries/d3.v3.min.js"></script>        <!-- d3 library -->
  <script src="../../libraries/sandwich.js"></script>        <!-- core d3 sandwich library -->
  <script src="circle_packing.js"></script>
  <link href="../../sandwich.css" rel="stylesheet" media="screen">      <!-- sandwich's CSS -->
  <link href="circle_packing.css" rel="stylesheet">
</head>
<body>
<div id="container">

<div id="sandwich-heading">
  <h1> <img src="../../images/sandwich_icon.jpeg"  height="50" width="50">  d3 sandwich </h1>
  <div id="sandwich-border"></div>
</div>

<h2>Circle Packing</h2>
<h2>Step #2: Create the JSON to Store the Data </h2>

<div class="toy" id="create_JSON">
  <div class="recipe_row">
    <div class="recipe_text">
      {Here is where the text will go to explain what we are doing}
    </div> <!-- end recipe_text -->
    <div class="recipe_code">
      <pre>
var produce = {
	name: "produce",
	children: [
		{ name: "Fruit",
			children: [
				{name: "Apple", quantity: 300},
				{name: "Banana", quantity: 200},
				{ name: "Berries",
					children: [
						{name: "Raspberries", quantity: 100},
						{name: "Strawberries", quantity: 200},
						{name: "Blueberries", quantity: 80}
					] }
			] },
		{ name: "Veggies",
			children:  [
				{name: "Zucchini", quantity: 52},
				{name: "Peas", quantity: 30},
				{name: "Carrots", quantity: 60},
        {name: "Onions", quantity: 70}
			] }
] };
      </pre>
    </div>   <!-- end recipe_code -->
  </div>  <!-- end recipe_row -->
  <div class="recipe_row">
    <div class="recipe_text">
        <div id="svg_location"> </div>        <!-- SVG graphics will be inserted here  -->
    </div>
      <div class="recipe_code">
        <form>
        </form>
      </div>  <!-- end recipe_code -->
  </div>     <!-- end recipe_row -->
</div>  <!-- end toy -->

<script type="text/javascript">

// var makeJSONInputFields = function (toyID, nodes, depth)  {
//   // console.log(nodes.name, depth * 30);
//   var div = getForm(toyID).append("div")
//     .style("margin-left", depth * 25)
//     .attr("class", nodes.children ? "parent" : "child");
//   div.append("input").attr("type", "text")
//     .attr("name", nodes.name)
//     .attr("value", nodes.name)
//     .attr("class", "input_name");
//   if (nodes.children) {
//     nodes.children.forEach( function(child) {
//       makeJSONInputFields(toyID, child, depth + 1)
//     } );
//   } else {
//     div.append("input").attr("type", "text")
//       .attr("name", nodes.name + "-quantity")
//       .attr("value", nodes.quantity)
//       .attr("class", "input_value");
//   };
// };
//
// function createJSONInputFields(toyID, nodes, updateFunctionName)  {
//   // createJSONInputFields: uses makeJSONInputFields to create input fields
//   //  for modifying JSON, then adds an update button
//   makeJSONInputFields(toyID, nodes, 1);
//   getForm(toyID).append("input")
//     .attr("type", "button")
//     .attr("value", "Update It")
//     .attr("onClick", updateFunctionName + "('" + toyID + "')"  );
// };










var ToyID = 'create_JSON';

oldJSON =  getCircleItems()

makePackCircle('create_JSON', oldJSON);

createJSONInputFields(ToyID, getCircleItems(), 'updateCirclePacking');





//   toyForm = .selectAll("input").each( function(d) {
//     // console.log(this.name);
//     // console.log(d3.select(this).attr("class")  );

function getDataFromInputFields(myForm)  {
  console.log(myForm, myForm.selectAll("form > div")[0]);
  myForm.selectAll("form > div")[0]
  .forEach(function(d, i) {
    console.log(d, d.id);
  });
};




function createJSONFromInputFields(toyID, oldJSON)  {
  var toyForm = getForm(toyID);
  var NewJSON = oldJSON;
  return getDataFromInputFields(toyForm);  //, oldJSON, NewJSON)
};





//   NOTE:  d3.select(this) creates a 1-element selection containing the current
// node. This allows you to use D3's operators to modify the element, or
// do whatever else, rather than using the raw W3C DOM API.  -- Mike B



updateCirclePacking = function(toyID)  {
  getSVG(toyID).selectAll('*').remove();      // Delete the old data viz
  updatedJSON = createJSONFromInputFields(toyID, oldJSON);

  // Now all we need to do is:
  // - turn the JSON input fields back into JSON
  // - call makePackCirclewith that JSON
};







// Define the function for updating the data viz using the values the user entered in the form
// UpdateFunction['create_JSON'] = function(values) {
//   getSVG('create_JSON').
// };

</script>


<h4> Up Next: <a href="circle_packing_3_pack.html">Recipe Step #3: Generate the Data about Where to Put the Circles   </a></h4>

<div id= "sandwich-footer">
</div> <!-- end sandwich-footer -->
</div><!-- end container -->
</body>
</html>
