<DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Abstract State Map: Basic Recipe</title>
  <script src="http://d3js.org/d3.v3.min.js"></script>        <!-- d3 library -->
  <link href="../../sandwich.css" rel="stylesheet" media="screen">      <!-- sandwich's CSS -->
  <script src="abstract_state.js"></script>
</head>
<body>
  <div id="container">

    <div id="sandwich-heading">
      <h1> <img src="../../sandwich_icon.jpeg"  height="50" width="50">  d3 sandwich </h1>
      <div id="sandwich-border"></div>
    </div>

      <h2> Abstract State Map</h2>
      <h2>   Step #2: Create a Rectangle for Each State </h2>

<p> Usually when you are just starting to learn a programming language, they start off with something very simple – e.g., printing the words "hello world!" At step along your path to learning more as a beginner, they tried to set it up so you only have 1 or 2 concepts you need to wrap your header and at any one time.</p>

<p> But with D3, to do something at all useful you need to tackle a bunch of concepts at the same time. So what we're going to do is start by giving you a chance to play with a few settings in the finished code, then step back and systematically unpack the concepts behind the card one by one.</p>

<h3>Playing with the Code</h3>

<div class="recipe_row">
<div class="recipe_text">
<p>Before we dive into the code, let's get a very rough feel for how it works.</p>
<p> Play with the values and see what it does.</p>
</div>
<div class="recipe_code">
  <pre>
    var width = <i id="width">40</i>, height = 40, cellsize = 39;    </b>
    <b id="svg">svg_area = d3.select("svg")</b>

    // Insert a rectangle for each state
    svg_area.selectAll("rect")
        .data(state_map)
      .enter()
      .append("rect")
        .attr("x", function(d,i)  { return d.col * width;})
        .attr("y", function(d,i) {return d.row * height;})
        .attr("width", cellsize)
        .attr("height", cellsize)
        <b id="fillLine">.style("fill", "<i id="fill">Sienna</i>");</b>
  </pre>
</div>
</div>  <!-- end recipe_row -->

<div class="recipe_row">
<div class="recipe_text">
  <svg width="500" height="160" id="play_code" class="SVG_playground"></svg>        <!-- SVG graphics will go here  -->
</div>
<div class="recipe_code">
  <form>
    <table class="input_table">
      <tr><td>Width</td><td><input type="text" value="40"  onChange="changeRecipeWidth(this)"> </td></tr>
<tr><td>Height</td><td>
</td></tr>
<tr><td>fill</td><td><input type="text" value="Sienna"  onChange="changeRecipeFill(this)">
</td></tr>
<tr><td>cellsize</td><td>
</td></tr>
    </table>
  </form>
</div>
</div>  <!-- end recipe_row -->
<script type="text/javascript">



  // Captains log:
  //  - Run the function to create the state map
  //  - In every "change" function,  select all the rectangles and then change the parameter, using the input value

  function updateCodeValue(formID, valueID, newValue) {
    // Updates the value of a line of code and highlights the line
    actualValueID = '#' + formID + ' #' + valueID;
    d3.select(actualValueID).text(newValue);
    d3.select('#' + formID).style("background-color", '#FFFF66');
  };

  function changeRecipeWidth(input) {
    updateCodeValue('width_height_cellsize', 'width', input.value);
  };

  function changeRecipeFill(input)  {
    updateCodeValue('fillLine', 'fill', input.value);
  };


</script>



<h3>Revenge of Your High School Math Teacher</h3>
<p>
  (what's a rectangle?)
</p>
<p>
  (explain and demonstrate the "border" trick)
</p>


<h3> Select, data, enter weirdness</h3>


<h3>Revenge, Part 2: why that calculation for height?</h3>



<h3>anonymous function weirdness</h3>




        <div id= "sandwich_footer">
        </div>
      </div>
    </body>
    </html>
